MACHINE ?= "raspberrypi4-64"

DISABLE_VC4GRAPHICS = "1"

# Additional image features
USER_CLASSES ?= "buildstats"

# By default disable interactive patch resolution (tasks will just fail instead):
PATCHRESOLVE = "noop"

# Disk Space Monitoring during the build
BB_DISKMON_DIRS = "\
    STOPTASKS,${TMPDIR},1G,100K \
    STOPTASKS,${DL_DIR},1G,100K \
    STOPTASKS,${SSTATE_DIR},1G,100K \
    HALT,${TMPDIR},100M,1K \
    HALT,${DL_DIR},100M,1K \
    HALT,${SSTATE_DIR},100M,1K"

CONF_VERSION = "2"

DISTRO_FEATURES += "systemd"
DISTRO_FEATURES_BACKFILL_CONSIDERED = "sysvinit"
VIRTUAL-RUNTIME_init_manager = "systemd"
VIRTUAL-RUNTIME_initscripts = ""

IMAGE_INSTALL:append = " greengrass-bin "

IMAGE_FSTYPES = "rpi-sdimg"

# GGV2_DATA_EP     = "xxx-ats.iot.<your aws region>.amazonaws.com"
# GGV2_CRED_EP     = "xxx.iot.<your aws region>.amazonaws.com"
# GGV2_REGION      = "<your aws region>"
# GGV2_THING_NAME  = "ELThing"
# GGV2_TES_RALIAS  = "GGTokenExchangeRoleAlias" # we got this from the cloudformation
# GGV2_THING_GROUP = "EmbeddedLinuxFleet"

# PACKAGECONFIG:pn-greengrass-bin = "fleetprovisioning"